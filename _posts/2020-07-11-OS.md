---
layout: post
title:  "操作系统原理(二)"
categories: 操作系统
tags:   操作系统
author: ZyWang
excerpt: 操作系统原理 
---

****

## 虚拟内存 ##

**让更多的程序跑在有限的内存里**

目标:类似覆盖技术，不是把程序中的所有内容都放在内存中，因而能够运行比当前空闲内存还要大的程序；
类似交换技术，能够实现进程在内存和外存之间的交换，因而有更多的空闲内存空间。

程序局部性原理：执行过程中，所执行的指令地址和指令操作数地址，局限在一定区域。

操作系统利用程序局部性原理，来实现高效的内存管理。

**基本概念**

可在页式或段式内存管理的基础上实现

可在装入程序时，不必将所有装入内存中去，而只需将当前需要执行的部分页面或段装入内存中，就可让程序开始执行。

在程序的执行过程中，如果需要的指令或数据尚未在内存，称为缺页或缺段，则有处理器通知操作系统将相应的页面或段调入内存，然后继续执行。

操作系统将内存中暂时不适用的页面或段调出保存在外存上，从而腾出更多的空间。

**特征**

大的用户空间:将物理内存和外存结合，提供给用户的虚拟空间通常大于实际的物理内存

部分交换:虚拟存储的调入和调出是对部分虚拟空间进行的

不连续性:物理内存分配的不连续，虚拟地址空间使用的不连续

**虚拟页式内存管理**

请求调页和页面置换

页表表项

![](https://s1.ax1x.com/2020/07/12/U8SV41.jpg)

驻留位:表示该页是在内存还是外存，如果该位等于1，表示该页位于内存当中，即该页表项是有效的，可以使用；如果该位等于0，表示该页位于外存中，如果访问该页表项，将导致缺页中断。

保护位:表示允许对该页作何种操作，如只读，可读写、可执行等。

修改位:表明此页在内存中是否被修改过，当系统回收该物理页面时，根据此来决定是否将它的内容写回外存。

访问位:如果该页被访问过，则设置此位用于页面置换算法。

